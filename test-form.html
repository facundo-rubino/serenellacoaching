<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba - Formulario de Suscripci√≥n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
            padding: 50px 0;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .api-status {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .api-status.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .api-status.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-container">
            <h2 class="text-center mb-4">üß™ Prueba del Formulario de Suscripci√≥n</h2>
            
            <div id="apiStatus" class="api-status" style="display: none;">
                <strong>Estado de la API:</strong> <span id="apiStatusText"></span>
            </div>

            <div class="footer-newsletter">
                <h4>Formulario de suscripci√≥n</h4>
                <p>¬°Prueba el formulario con datos reales!</p>
                
                <form id="subscriptionForm" onsubmit="event.preventDefault(); submitSubscriptionForm();">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label for="name" class="form-label">Nombre completo *</label>
                            <input type="text" name="name" id="name" class="form-control" placeholder="Tu nombre completo" required>
                        </div>
                        <div class="col-12 mb-3">
                            <label for="email" class="form-label">Email *</label>
                            <input type="email" name="email" id="email" class="form-control" placeholder="tu@email.com" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="phone" class="form-label">Celular (opcional)</label>
                            <input type="tel" name="phone" id="phone" class="form-control" placeholder="+598 99 123 456">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="birthDate" class="form-label">Fecha de nacimiento (opcional)</label>
                            <input type="date" name="birthDate" id="birthDate" class="form-control">
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary w-100 btn-subscribe">
                                Suscribirse üöÄ
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="mt-4">
                <h5>Instrucciones de prueba:</h5>
                <ol>
                    <li>Completa el formulario con datos de prueba</li>
                    <li>Presiona "Suscribirse"</li>
                    <li>Observa la notificaci√≥n de √©xito/error</li>
                    <li>Revisa la consola del navegador para logs adicionales</li>
                </ol>
                
                <div class="alert alert-info mt-3">
                    <strong>üìù Nota:</strong> Este formulario est√° conectado a un backend Node.js/Express que simula el guardado en MongoDB. 
                    Los datos se procesan pero no se guardan permanentemente hasta que configures los permisos de MongoDB Atlas.
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="assets/js/api.js"></script>

    <script>
        // Verificar estado de la API al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', async () => {
            const statusDiv = document.getElementById('apiStatus');
            const statusText = document.getElementById('apiStatusText');
            
            try {
                const response = await fetch('http://localhost:3001/api/health');
                const data = await response.json();
                
                statusDiv.className = 'api-status success';
                statusText.textContent = '‚úÖ API funcionando correctamente';
                statusDiv.style.display = 'block';
            } catch (error) {
                statusDiv.className = 'api-status error';
                statusText.textContent = '‚ùå Error conectando con la API. Aseg√∫rate de que el servidor est√© ejecut√°ndose en el puerto 3001.';
                statusDiv.style.display = 'block';
            }
        });

        // Pre-llenar el formulario con datos de ejemplo
        setTimeout(() => {
            document.getElementById('name').value = 'Mar√≠a Garc√≠a';
            document.getElementById('email').value = 'maria.garcia@email.com';
            document.getElementById('phone').value = '+598 99 123 456';
            document.getElementById('birthDate').value = '1985-03-15';
        }, 500);
    </script>
</body>
</html>
